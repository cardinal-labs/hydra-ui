"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.withSleep = exports.signAndSendTransaction = void 0;
const tslib_1 = require("tslib");
const anchor_1 = require("@project-serum/anchor");
const signAndSendTransaction = (connection, wallet, transaction) => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
    if (!wallet)
        throw new Error("Wallet not connected");
    transaction.feePayer = wallet.publicKey;
    transaction.recentBlockhash = (yield connection.getRecentBlockhash("max")).blockhash;
    yield wallet.signTransaction(transaction);
    let txid = null;
    txid = yield anchor_1.web3.sendAndConfirmRawTransaction(connection, transaction.serialize());
    return txid;
});
exports.signAndSendTransaction = signAndSendTransaction;
const withSleep = (fn, sleep = 2000) => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
    yield new Promise((r) => setTimeout(r, sleep));
    yield fn();
});
exports.withSleep = withSleep;
//# sourceMappingURL=transactions.js.map