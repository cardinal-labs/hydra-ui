"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useReverseEntry = void 0;
const tslib_1 = require("tslib");
const namespaces_1 = require("@cardinal/namespaces");
const react_1 = require("react");
const useReverseEntry = (connection, pubkey) => {
    const [loading, setLoading] = (0, react_1.useState)(undefined);
    const [reverseEntryData, setReverseEntry] = (0, react_1.useState)(undefined);
    const getReverseEntryData = () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
        setLoading(true);
        try {
            if (!pubkey || !connection)
                return;
            const data = yield (0, namespaces_1.getReverseEntry)(connection, pubkey);
            setReverseEntry(data);
        }
        catch (e) {
            setReverseEntry(undefined);
            console.log(`Failed to get claim request: ${e}`, e);
        }
        finally {
            setLoading(false);
        }
    });
    (0, react_1.useMemo)(() => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
        getReverseEntryData();
    }), [connection, pubkey]);
    return {
        reverseEntryData,
        getReverseEntryData,
        loading,
    };
};
exports.useReverseEntry = useReverseEntry;
//# sourceMappingURL=useReverseEntry.js.map