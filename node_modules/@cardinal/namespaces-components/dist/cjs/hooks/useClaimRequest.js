"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useClaimRequest = void 0;
const tslib_1 = require("tslib");
const namespaces_1 = require("@cardinal/namespaces");
const react_1 = require("react");
const useClaimRequest = (connection, namespaceName, entryName, pubkey) => {
    const [loadingClaimRequest, setLoadingClaimRequest] = (0, react_1.useState)(undefined);
    const [claimRequest, setClaimRequest] = (0, react_1.useState)(undefined);
    const getClaimRequestData = () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
        setLoadingClaimRequest(true);
        try {
            if (!pubkey || !entryName || !connection)
                return;
            const data = yield (0, namespaces_1.getClaimRequest)(connection, namespaceName, entryName, pubkey);
            setClaimRequest(data);
        }
        catch (e) {
            setClaimRequest(undefined);
            console.log(`Failed to get claim request: ${e}`, e);
        }
        finally {
            setLoadingClaimRequest(false);
        }
    });
    (0, react_1.useMemo)(() => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
        getClaimRequestData();
    }), [connection, namespaceName, entryName, pubkey]);
    return {
        claimRequest,
        loadingClaimRequest,
        getClaimRequestData,
    };
};
exports.useClaimRequest = useClaimRequest;
//# sourceMappingURL=useClaimRequest.js.map